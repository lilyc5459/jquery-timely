!function(r,e){var t=function(t,n){this.wrapper=t,this.$wrapper=r(t),this.options=n,this.$win=r(e)};t.prototype={defaults:{container:".timely",groups:".timely__groups",marker_major:".timely__markers--major",marker_minor:".timely__markers--minor",marker_event:".timely__event",order:!0,interval:1},init:function(){var e=this;return e.config=r.extend({},e.defaults,e.options),e.build(),e.bindEvents(),e},build:function(){var e=this,t=e.config.interval,n=e.$wrapper.width();e.$wrapper.prepend('<div class="timely"></div>'),r(e.config.container).css("width",n).prepend('<ul class="timely__groups"></ul>');var a=[];r("[data-year]").each(function(){var e={year:r(this).data("year"),month:r(this).data("month"),day:r(this).data("day")};a.push(e)}),a.sort(e.sortEvents(e.config.order));var i,o;e.config.order?(i=a[0].year,o=a[a.length-1].year):(i=a[a.length-1].year,o=a[0].year);var s=Math.abs(i-o);t=10>=s?1:50>=s?5:100>=s?10:500>=s?50:100;for(var d=Math.ceil(s/t),c=n/d,p=e.config.order?i:o,l=0;d>l;l++)l>0&&(p=e.config.order?p+t:p-t),r("<li>",{"data-marker-year":p,style:"width:"+c+"px"}).append(r("<ul>",{"class":"timely__markers--minor"})).append(r("<div>",{"class":"timely__markers--major"})).append(r("<span>",{text:p})).appendTo(e.config.groups);var f=e.config.order?p+t:p-t;r("<span>",{text:f}).appendTo(e.config.groups+"> li:last-child");var m=0,y="m";5>=t?(m=12,y="m"):(m=10,y="y");for(var u=0;m>u;u++)"d"===y||("m"===y?r("<li>",{"data-marker-month":u,style:"width:"+c/(m+1)}).appendTo(e.config.marker_minor):"y"===y&&r("<li>",{style:"width:"+c/(m+1)+"px"}).appendTo(e.config.marker_minor));r.each(a,function(t,a){if("d"===y);else if("m"===y);else if("y"===y){var o=(a.year-i)/s*(n-1);r("<div>",{"class":"timely__event","data-year":a.year}).css("left",o).appendTo(e.config.container)}})},sortEvents:function(r){return function(e,t){var n,a;r?(n=-1,a=1):(n=1,a=-1);var i=e.year,o=t.year;if(i===o){var s=e.month,d=t.month;if(s===d){var c=e.day,p=t.day;return c===p?0:p>c?n:c>p?a:0}return d>s?n:s>d?a:0}return o>i?n:i>o?a:0}},bindEvents:function(){},destroy:function(){}},t.defaults=t.prototype.defaults,r.fn.timely=function(r){return this.destroy=function(){this.each(function(){new t(this,r).destroy()})},this.each(function(){new t(this,r).init()})}}(jQuery,window,document);