!function(r,e){var n=function(n,t){this.wrapper=n,this.$wrapper=r(n),this.options=t,this.$win=r(e)};n.prototype={defaults:{container:"timely",groups:"timely__groups",markers_major:"timely__markers--major",markers_minor:"timely__markers--minor",markers_event:"timely__markers--event",order:!0,interval:1},init:function(){var e=this;return e.config=r.extend({},e.defaults,e.options),e.build(),e.bindEvents(),e},build:function(){var e=this,n=e.config.interval,t=e.$wrapper.width();e.$wrapper.prepend('<div class="timely"></div>'),r("."+e.config.container).css("width",t).prepend('<ul class="'+e.config.groups+'"></ul>');var a=[];r("[data-year]").each(function(){var e={year:r(this).data("year"),month:r(this).data("month"),day:r(this).data("day")};a.push(e)}),a.sort(e.sortEvents(e.config.order));var i,o;e.config.order?(i=a[0].year,o=a[a.length-1].year):(i=a[a.length-1].year,o=a[0].year);var s=Math.abs(i-o);n=10>=s?1:50>=s?5:100>=s?10:500>=s?50:100;for(var d=Math.ceil(s/n),c=t/d,f=e.config.order?i:o,p=0;d>p;p++)p>0&&(f=e.config.order?f+n:f-n),r("<li>",{"data-marker-year":f,style:"width:"+c+"px"}).append(r("<ul>",{"class":e.config.markers_minor})).append(r("<div>",{"class":e.config.markers_major})).append(r("<span>",{text:f})).appendTo("."+e.config.groups);var l=e.config.order?f+n:f-n;r("<span>",{text:l}).appendTo("."+e.config.groups+"> li:last-child");var m=0,u="m";5>=n?(m=12,u="m"):(m=10,u="y");for(var y=0;m>y;y++)"d"===u||("m"===u?r("<li>",{"data-marker-month":y,style:"width:"+c/(m+1)}).appendTo("."+e.config.markers_minor):"y"===u&&r("<li>",{style:"width:"+c/(m+1)+"px"}).appendTo("."+e.config.markers_minor));r.each(a,function(n,a){if("d"===u);else if("m"===u);else if("y"===u){var o=(a.year-i)/(l-i)*(t-1);r("<div>",{"class":e.config.markers_event,"data-year":a.year}).css("left",o).appendTo("."+e.config.container)}})},sortEvents:function(r){return function(e,n){var t,a;r?(t=-1,a=1):(t=1,a=-1);var i=e.year,o=n.year;if(i===o){var s=e.month,d=n.month;if(s===d){var c=e.day,f=n.day;return c===f?0:f>c?t:c>f?a:0}return d>s?t:s>d?a:0}return o>i?t:i>o?a:0}},bindEvents:function(){},destroy:function(){}},n.defaults=n.prototype.defaults,r.fn.timely=function(r){return this.destroy=function(){this.each(function(){new n(this,r).destroy()})},this.each(function(){new n(this,r).init()})}}(jQuery,window,document);